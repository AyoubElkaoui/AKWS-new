---
import { Image } from 'astro:assets';
import logo from '../../assets/fulllogo_transparent_nobuffer.png';

const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/diensten', label: 'Diensten' },
  { href: '/cases', label: 'Cases' },
  { href: '/blog', label: 'Blog' },
  { href: '/over', label: 'Over ons' },
  { href: '/contact', label: 'Contact' },
];
---

<header class="fixed inset-x-0 top-0 z-50" id="site-header">
  <div class="relative">
    <!-- Glassmorphism background -->
    <div class="absolute inset-0 bg-gradient-to-b from-[#0a0b0f]/95 to-[#0a0b0f]/90 backdrop-blur-xl"></div>
    <div class="absolute inset-0 border-b border-white/[0.08]"></div>
    
    <!-- Subtle glow effect -->
    <div class="absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-indigo-500/20 to-transparent"></div>

    <div class="relative mx-auto flex h-20 max-w-7xl items-center justify-between px-6">
      <a href="/" class="site-brand" aria-label="AK Web Solutions">
        <Image src={logo} alt="AK Web Solutions" width={204} height={48} format="webp" quality={85} fetchpriority="high" decoding="async" />
      </a>

      <nav class="hidden items-center gap-8 lg:flex">
        {navLinks.map((link) => (
          <a href={link.href} class="nav-link" data-nav data-astro-prefetch>
            {link.label}
          </a>
        ))}
      </nav>

      <div class="flex items-center gap-4">
        <a href="/contact" class="btn-primary hidden md:inline-flex" data-astro-prefetch>
          <span class="flex items-center gap-2">
            Start project
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
        </a>

        <button class="flex size-12 items-center justify-center rounded-xl border border-white/[0.08] bg-white/[0.03] text-white/90 backdrop-blur-sm transition-all hover:border-white/20 hover:bg-white/[0.06] lg:hidden" id="menu-toggle" aria-label="Menu">
          <span class="sr-only">Open navigatie</span>
          <svg id="icon-menu" width="24" height="24" viewBox="0 0 24 24" fill="none" class="transition-opacity duration-200">
            <path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
          </svg>
          <svg id="icon-close" width="24" height="24" viewBox="0 0 24 24" fill="none" class="hidden transition-opacity duration-200">
            <path d="M5 5L19 19M19 5L5 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
          </svg>
        </button>
      </div>
    </div>

    <div id="mobile-menu" class="relative hidden border-t border-white/[0.08] bg-gradient-to-b from-[#0a0b0f]/98 to-[#0a0b0f]/95 backdrop-blur-xl lg:hidden">
      <div class="mx-auto grid max-w-7xl gap-2 px-6 py-6">
        {navLinks.map((link) => (
          <a href={link.href} class="rounded-xl border border-white/[0.08] bg-white/[0.03] px-5 py-3.5 text-base font-medium text-white/80 backdrop-blur-sm transition-all hover:border-indigo-500/30 hover:bg-indigo-500/[0.08] hover:text-white" data-nav data-astro-prefetch>
            {link.label}
          </a>
        ))}
        <a href="/contact" class="btn-primary justify-center mt-2" data-astro-prefetch>
          Start project
        </a>
      </div>
    </div>
  </div>

  <script is:inline>
    const header = document.getElementById('site-header');
    const toggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const iconMenu = document.getElementById('icon-menu');
    const iconClose = document.getElementById('icon-close');

    let open = false;

    const setState = (state) => {
      open = state;

      if (!mobileMenu) return;
      mobileMenu.classList.toggle('hidden', !open);
      iconMenu?.classList.toggle('hidden', open);
      iconClose?.classList.toggle('hidden', !open);

      if (open) {
        mobileMenu.animate(
          [{ opacity: 0, transform: 'translateY(-10px)' }, { opacity: 1, transform: 'translateY(0)' }],
          { duration: 200, easing: 'ease-out' }
        );
      }
    };

    toggle?.addEventListener('click', () => setState(!open));

    header?.querySelectorAll('[data-nav]').forEach((link) => {
      link.addEventListener('click', () => setState(false));
    });
  </script>
</header>

<section class="section hero-section" id="hero">
  <div id="container" aria-hidden="true"></div>
  <div id="stats"></div>
  <div id="ui-container"></div>

  <header class="hero-header">
    <div class="logo-container" aria-hidden="true">
      <div class="logo-circles">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
      </div>
    </div>
    <div class="center-logo">
      <h1 id="logo-text">Nexus.</h1>
    </div>
  </header>

  <div class="hero">
    <span class="hero-tag">üìç Baarn ‚Ä¢ Websites & Online Marketing</span>
    <h1>Jouw bedrijf verdient<br />een website die werkt.</h1>
    <p class="hero-summary">
      Geen templates. Geen maanden wachten. Wij bouwen snelle websites die jouw diensten helder uitleggen en nieuwe klanten binnenhalen. <strong style="color: rgba(99, 102, 241, 0.95);">In 2-4 weken online.</strong>
    </p>
    
    <div class="hero-proof-simple">
      <div class="hero-proof-item">
        ‚úì Snelle websites die makkelijk te vinden zijn
      </div>
      <div class="hero-proof-item">
        ‚úì Marketing die nieuwe aanvragen oplevert
      </div>
      <div class="hero-proof-item">
        ‚úì E√©n vast team, geen verrassingen
      </div>
    </div>

    <div class="hero-actions">
      <a href="/contact" class="hero-btn hero-btn--primary">
        <span>Plan een gesprek</span>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
            <a href="#cases" class="hero-btn hero-btn--ghost">Bekijk eerdere projecten</a>
    </div>
  </div>
</section>

<script>
  import initNexusHero from '../../scripts/nexusHero';
  
  // Enhanced device capability detection
  function hasWebGLSupport() {
    try {
      const canvas = document.createElement('canvas');
      return !!(canvas.getContext('webgl') || canvas.getContext('experimental-webgl'));
    } catch (e) {
      return false;
    }
  }
  
  function isLowPerformanceDevice() {
    const memoryGb = (navigator as any).deviceMemory ?? 8;
    const cores = navigator.hardwareConcurrency ?? 8;
    const isIntegratedGPU = /Intel.*HD|Intel.*UHD|Intel.*Iris/i.test(navigator.userAgent);
    
    // Skip heavy animations on:
    // - Devices with ‚â§4GB RAM
    // - Devices with ‚â§4 CPU cores
    // - Devices with integrated Intel graphics
    return memoryGb <= 4 || cores <= 4 || isIntegratedGPU;
  }
  
  // Nexus 3D Hero Background (only on capable devices)
  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');
  const isTouchViewport = window.matchMedia('(max-width: 768px)');
  
  const shouldSkipHero = 
    prefersReducedMotion.matches || 
    isTouchViewport.matches || 
    !hasWebGLSupport() ||
    isLowPerformanceDevice();

  if (!shouldSkipHero) {
    const loadHero = () => {
      try {
        initNexusHero();
      } catch (err) {
        console.warn('[hero] init failed, falling back to static background', err);
        // Fallback: add static gradient class
        document.querySelector('.hero-section')?.classList.add('hero-static-fallback');
      }
    };

    if ('requestIdleCallback' in window) {
      requestIdleCallback(loadHero, { timeout: 1200 });
    } else {
      setTimeout(loadHero, 160);
    }
  } else {
    // Apply static fallback immediately for low-power devices
    document.querySelector('.hero-section')?.classList.add('hero-static-fallback');
  }
</script>

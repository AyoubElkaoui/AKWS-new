---
import Layout from '../layouts/Layout.astro';
import Header from '../components/nav/Header.astro';
import Footer from '../components/nav/Footer.astro';

import IconBadge from '../components/ui/IconBadge.astro';
const siteUrl = Astro.site?.toString() ?? 'https://akwebsolutions.nl';
const pageUrl = `${siteUrl}/contact`;

const contactSignals = [
  { value: '< 1 dag', label: 'Reactietijd via mail' },
  { value: '2 weken', label: 'Van intake tot eerste sprint' },
  { value: 'Hybrid', label: 'Remote + on-site mogelijk' },
];

const faqs = [
  {
    question: 'Hoe snel plannen we een kennismaking in?',
    answer: 'Na je bericht ontvang je binnen één werkdag een voorstel. Meestal plannen we binnen vijf werkdagen een strategiecall in.',
  },
  {
    question: 'Kunnen we direct een call inplannen?',
    answer: 'Ja, via de knop “Plan direct een call” kies je zelf een moment in onze agenda. We bereiden de call voor op basis van jouw input.',
  },
  {
    question: 'Wat moet ik voorbereiden?',
    answer: 'Een korte beschrijving van je doelen, huidige website en belangrijkste KPI’s is genoeg. Eventuele analytics of campagne-data mag je later delen.',
  },
];

const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: faqs.map((item) => ({
    '@type': 'Question',
    name: item.question,
    acceptedAnswer: {
      '@type': 'Answer',
      text: item.answer,
    },
  })),
};

const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    {
      '@type': 'ListItem',
      position: 1,
      name: 'Home',
      item: siteUrl,
    },
    {
      '@type': 'ListItem',
      position: 2,
      name: 'Contact',
      item: pageUrl,
    },
  ],
};

const contactSchema = {
  '@context': 'https://schema.org',
  '@type': 'ContactPage',
  name: 'Contact AK Web Solutions',
  url: pageUrl,
  description: 'Neem contact op met AK Web Solutions voor strategie, webdesign, development en marketing automation.',
  contactType: 'sales',
  contactOption: 'CustomerService',
  inLanguage: ['nl', 'en'],
  telephone: '+31685722387',
  email: 'info@akwebsolutions.nl',
  areaServed: 'NL',
  address: {
    '@type': 'PostalAddress',
    addressLocality: 'Baarn',
    addressCountry: 'NL',
  },
};

const heroMetrics = [
  { value: '< 1 dag', label: 'Reactietijd' },
  { value: '45 min', label: 'Kickstart sessie' },
  { value: 'Hybrid', label: 'Remote + on-site' },
];

const heroHighlights = [
  {
    icon: { set: 'heroicons-outline', name: 'sparkles' },
    title: 'Strategiecall',
    body: 'We bereiden de call voor op basis van jouw doelen en data.',
  },
  {
    icon: { set: 'heroicons-outline', name: 'clipboard-document-check' },
    title: 'Concreet voorstel',
    body: 'Binnen 24 uur ontvang je een plan voor sprint één en volgende stappen.',
  },
  {
    icon: { set: 'heroicons-outline', name: 'chat-bubble-oval-left-ellipsis' },
    title: 'Direct contact',
    body: 'Je spreekt met strategen en makers. Geen saleslaag ertussen.',
  },
];
---

<Layout
  title="Contact – AK Web Solutions"
  description="Neem contact op met AK Web Solutions. We reageren binnen één werkdag en plannen graag een strategiecall om jouw groeidoel te bespreken."
  structuredData={[breadcrumbSchema, contactSchema, faqSchema]}
>
  <Header />
  <main class="services-basic">
    <!-- Hero Section -->
    <section class="services-basic__hero">
      <div class="services-basic__shell">
        <div class="services-basic__hero-content" data-reveal>
          <h1>Laten we je website verbeteren.</h1>
          <p>Vul het formulier in of bel direct. We reageren binnen 1 werkdag met een concrete aanpak en vrijblijvend advies over je huidige site.</p>
        </div>

        <!-- Quick Stats -->
        <div class="services-basic__stats">
          {heroMetrics.map((metric, index) => (
            <div class="services-basic__stat" data-reveal style={`--reveal-delay: ${index * 0.08}s`}>
              <strong class="services-basic__stat-value">{metric.value}</strong>
              <span class="services-basic__stat-label">{metric.label}</span>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Contact Form + Info Section -->
    <section class="services-basic__section" style="padding-top: clamp(4rem, 8vw, 6rem);">
      <div class="services-basic__shell">
        <div class="services-basic__grid services-basic__grid--2">
          
          <!-- Contact Info Side -->
          <aside class="services-basic__card" data-reveal>
            <h2 style="font-size: 1.75rem; margin-bottom: 1rem;">Direct contact</h2>
            <p style="color: rgba(244, 244, 255, 0.72); margin-bottom: 2rem;">Liever direct bellen of mailen? Dat kan ook.</p>
            
            <div class="services-basic__contact-list">
              <div class="services-basic__contact-item">
                <span class="services-basic__contact-label">Telefoon</span>
                <a href="tel:+31685722387" class="services-basic__contact-link">+31 (0)6 85 72 23 87</a>
              </div>
              <div class="services-basic__contact-item">
                <span class="services-basic__contact-label">E-mail</span>
                <a href="mailto:info@akwebsolutions.nl" class="services-basic__contact-link">info@akwebsolutions.nl</a>
              </div>
              <div class="services-basic__contact-item">
                <span class="services-basic__contact-label">Locatie</span>
                <p class="services-basic__contact-text">Baarn, Nederland</p>
              </div>
            </div>

            <div style="margin-top: 2.5rem; padding-top: 2rem; border-top: 1px solid rgba(99, 102, 241, 0.1);">
              <h3 style="font-size: 1.125rem; margin-bottom: 1rem;">Wat krijg je?</h3>
              <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 0.75rem;">
                {heroHighlights.map((item) => (
                  <li style="display: flex; gap: 0.75rem; align-items: start;">
                    <span style="flex-shrink: 0; width: 1.25rem; height: 1.25rem; border-radius: 50%; background: rgba(99, 102, 241, 0.15); display: flex; align-items: center; justify-content: center; margin-top: 0.125rem;">
                      <IconBadge set={item.icon.set} name={item.icon.name} width={14} color="rgba(99, 102, 241, 0.9)" />
                    </span>
                    <div>
                      <strong style="display: block; font-size: 0.9375rem; margin-bottom: 0.25rem;">{item.title}</strong>
                      <span style="font-size: 0.875rem; color: rgba(244, 244, 255, 0.62);">{item.body}</span>
                    </div>
                  </li>
                ))}
              </ul>
            </div>
          </aside>

          <!-- Form Side -->
          <form id="contactForm" class="services-basic__form" action="https://formsubmit.co/info@akwebsolutions.nl" method="POST" data-reveal style="--reveal-delay: 0.1s">
            <input type="hidden" name="_subject" value="Nieuw contactformulier - AK Web Solutions" />
            <input type="hidden" name="_next" value="https://akwebsolutions.nl/bedankt" />
            <input type="text" name="_honey" style="display:none" tabindex="-1" autocomplete="off" />
            <input type="hidden" id="recaptchaToken" name="g-recaptcha-response" />

            <h2 style="font-size: 1.75rem; margin-bottom: 0.5rem;">Vraag een offerte aan</h2>
            <p style="color: rgba(244, 244, 255, 0.72); margin-bottom: 2rem;">Vul je gegevens in en vertel kort waar we je mee kunnen helpen. We nemen binnen 1 werkdag contact op.</p>

            <div class="services-basic__form-grid">
              <label class="services-basic__field">
                <span>Naam *</span>
                <input required type="text" name="name" placeholder="Voor- en achternaam" />
              </label>
              <label class="services-basic__field">
                <span>E-mail *</span>
                <input required type="email" name="email" placeholder="jij@bedrijf.nl" />
              </label>
              <label class="services-basic__field">
                <span>Telefoon</span>
                <input type="tel" name="phone" placeholder="06 12 34 56 78" />
              </label>
              <label class="services-basic__field">
                <span>Bedrijf / Website</span>
                <input type="text" name="company" placeholder="Bedrijfsnaam of website URL" />
              </label>
              <label class="services-basic__field services-basic__field--full">
                <span>Waar kunnen we je mee helpen? *</span>
                <textarea required name="message" rows="6" placeholder="Bijvoorbeeld: Nieuwe website bouwen, huidige site sneller maken, SEO verbeteren..."></textarea>
              </label>
            </div>

            <button type="submit" class="services-basic__btn services-basic__btn--primary" style="width: 100%;">
              Verstuur aanvraag
            </button>
            <p style="font-size: 0.8125rem; color: rgba(244, 244, 255, 0.52); text-align: center; margin-top: 1rem;">
              We reageren binnen 1 werkdag • Vrijblijvend advies
            </p>
          </form>

        </div>
      </div>
    </section>

    <!-- FAQ Section - Compact -->
    <section class="services-basic__section">
      <div class="services-basic__shell">
        <header class="services-basic__intro" data-reveal>
          <h2>Veelgestelde vragen</h2>
          <p>Snel antwoord op de meest gestelde vragen over onze werkwijze.</p>
        </header>
        <div class="services-basic__faq">
          {faqs.map((item, index) => (
            <details class="services-basic__faq-item" data-reveal style={`--reveal-delay: ${index * 0.08}s`}>
              <summary>{item.question}</summary>
              <p>{item.answer}</p>
            </details>
          ))}
        </div>
      </div>
    </section>

  </main>
  <Footer />
</Layout>

<script>
  // reCAPTCHA v3 integration for contact form
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contactForm') as HTMLFormElement | null;
    if (!form) return;

    form.addEventListener('submit', (e: Event) => {
      e.preventDefault();

      // Check if grecaptcha is loaded
      if (typeof (window as any).grecaptcha === 'undefined') {
        console.error('reCAPTCHA not loaded');
        alert('Er is een probleem met het beveiligingssysteem. Probeer de pagina opnieuw te laden.');
        return;
      }

      // Execute reCAPTCHA v3
      (window as any).grecaptcha.ready(() => {
        (window as any).grecaptcha.execute('6Lfg5fErAAAAAFNB6fEZq1TBrAKH1zysHKXVhCZv', { action: 'contact_form' })
          .then((token: string) => {
            // Add token to hidden field
            const tokenField = document.getElementById('recaptchaToken') as HTMLInputElement;
            if (tokenField) {
              tokenField.value = token;
            }
            
            // Submit form
            form.submit();
          })
          .catch((error: Error) => {
            console.error('reCAPTCHA error:', error);
            alert('Er ging iets mis met het beveiligingssysteem. Probeer het opnieuw.');
          });
      });
    });
  });
</script>
